

CREATE PROCEDURE [dbo].[bookInsert](
   @BookName varchar(max),
   @Author varchar(max),
   @PublisDate datetime,
   @BookNumChar int
)
AS
BEGIN
   IF NOT EXISTS (SELECT * FROM Book WHERE BookName = @BookName)
   BEGIN
       insert into  [dbo].[Book] (BookName,Author,PublishDate,BookNumChar)
       VALUES (@BookName, @Author, @PublisDate, @BookNumChar);
   END
   
   SELECT @@ROWCOUNT AS Output;
END;
GO
------------------------------------------------------------------------------

-- word values insertion
CREATE PROCEDURE [dbo].[wordInsert](
	@wordVlaue varchar(max),
	@Value varchar(max),
	@BookID int,
	@Paragrath int,
	@Page varchar(4),
	@Line int,
	@Sentence int
)
AS
BEGIN
   
	DECLARE @WordID INT;
	IF NOT EXISTS (SELECT * FROM Word WHERE [Value] = @wordVlaue)
	BEGIN
		INSERT INTO dbo.Word ([Value],[Length]) VALUES (@Value,LEN(@Value));
		SET @WordID = @@IDENTITY;
	END
	ELSE
	BEGIN
		SELECT @WordID=WordID FROM Word WHERE [Value] = @wordVlaue;
	END
	-- word information values insertion into WordImfo table
	INSERT INTO  dbo.WordInfo (BookID,Line,WordID,Paragrath,Page,Sentence)
	VALUES (@BookID,@Line,@WordId,@Paragrath,@Page,@Sentence);
	
	SELECT @@ROWCOUNT AS Output;
END;
GO


-- word gruop values insertion
insert into dbo.wordGroup (GroupID,GroupName,WordID)
VALUES (@WordID,@GroupName, null);

-- phrase values insertion
insert into dbo.WordPhrase (PhraseID,WordID)
VALUES (@PhraseID, null);
